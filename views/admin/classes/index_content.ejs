<div class="page-header">
  <h3 class="page-title">Quản lý lớp học</h3>
</div>

<div class="card">
  <div class="card-body">
    <a href="/admin/classes/add" class="btn btn-primary mb-3">+ Thêm lớp</a>

    <table class="table table-hover">
      <thead>
        <tr>
          <th>Tên lớp</th>
          <th>Khối</th>
          <th>Mô tả</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        <% classes.forEach(c => { %>
        <tr>
          <td><%= c.class_name %></td>
          <td><%= c.grade_name %></td>
          <td><%= c.description || '' %></td>

          <td>
            <a class="btn btn-success btn-sm" href="/admin/classes/edit/<%= c.id %>">Sửa</a>
            <button class="btn btn-danger btn-sm" onclick="deleteClass(<%= c.id %>)">Xóa</button>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script>
async function deleteClass(id) {
    if (!confirm("Xóa lớp này?")) return;

    const res = await fetch(`/api/classes/${id}`, { method: "DELETE" });
    const json = await res.json();

    if (json.success) {
      alert("Đã xóa!");
      location.reload();
    } else alert(json.message);
}
</script>
