<div class="page-header">
  <div class="row">
    <div class="col">
      <h3 class="page-title">Quản lý học sinh</h3>
    </div>
    <div class="col-auto">
      <a href="/admin/students/add" class="btn btn-primary">
        + Thêm học sinh
      </a>
    </div>
  </div>
</div>

<div class="card">
  <div class="card-body table-responsive">
    <table class="table table-hover table-striped">
      <thead>
        <tr>
          <th>Mã HS</th>
          <th>Họ và tên</th>
          <th>Lớp</th>
          <th>Phụ huynh</th>
          <th>Zalo</th>
          <th>Hành động</th>
        </tr>
      </thead>
      <tbody>
        <% students.forEach(s => { %>
        <tr>
          <td><%= s.student_id %></td>
          <td><%= s.full_name %></td>
          <td><%= s.class_name %></td>
          <td><%= s.parent_phone %></td>
          <td><%= s.zalo_id %></td>
          <td>
            <a href="/admin/students/edit/<%= s.id %>" class="btn btn-success btn-sm">Sửa</a>
            <button class="btn btn-danger btn-sm btn-delete" data-id="<%= s.id %>">Xóa</button>
          </td>
        </tr>
        <% }) %>
      </tbody>
    </table>
  </div>
</div>

<script>
document.querySelectorAll(".btn-delete").forEach(btn => {
  btn.onclick = async () => {
    if (!confirm("Xóa học sinh này?")) return;
    await fetch(`/api/students/${btn.dataset.id}`, { method: "DELETE" });
    location.reload();
  };
});
</script>
